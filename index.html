<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>노라벨 카카오 지도 (안정화 버전)</title>
  <style>
    html, body { height:100%; margin:0; padding:0; }
    #map { width:100%; height:100%; }
  </style>
  <!-- SDK는 defer로 지연 로딩 → 파서 블로킹 경고 방지 -->
  <script defer src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_APP_KEY"></script>
</head>
<body>
  <div id="map"></div>

  <script>
    (function () {
      // 1) SDK 로딩 완료를 polling으로 확인(안전)
      function ready(fn){
        if (window.kakao && kakao.maps) return fn();
        setTimeout(function(){ ready(fn); }, 50);
      }

      ready(function(){
        // 2) ES5 문법 사용: var 로 선언 (const/let 사용 안 함)
        var TILE_URL = "https://cartodb-basemaps-a.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png";

        // 3) Kakao Tileset 등록 (XYZ → TMS y 반전)
        kakao.maps.Tileset.add("NOLABEL",
          new kakao.maps.Tileset(
            256, 256,
            function(x, y, z){
              var yXYZ = Math.pow(2, z) - y - 1;
              return TILE_URL
                .replace("{z}", z)
                .replace("{x}", x)
                .replace("{y}", yXYZ);
            },
            [
              { label: "© OpenStreetMap contributors · CARTO", minZoom: 0, maxZoom: 22 }
            ],
            false, 0, 22
          )
        );

        // 4) 지도 생성
        var map = new kakao.maps.Map(document.getElementById("map"), {
          center: new kakao.maps.LatLng(37.5665, 126.9780),
          level: 6,
          mapTypeId: kakao.maps.MapTypeI
